<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Racing Game - Pro UI</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #00ffff;
            --secondary: #ff0055;
            --accent: #ffeb3b;
            --dark-glass: rgba(15, 15, 20, 0.75);
            --border-glass: rgba(255, 255, 255, 0.1);
        }

        body { 
            margin: 0; overflow: hidden; background-color: #050505; 
            font-family: 'Rajdhani', sans-serif; color: white; user-select: none;
        }
        
        #game-container { position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; }
        .hidden { display: none !important; opacity: 0; pointer-events: none; }
        h1, h2, h3 { font-family: 'Orbitron', sans-serif; margin: 0; text-transform: uppercase; letter-spacing: 2px; }

        #ui-layer, #results-layer, #pause-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            z-index: 10; transition: opacity 0.3s ease;
        }
        
        #ui-layer {
            background: 
                linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.95)),
                linear-gradient(transparent 49px, rgba(0, 255, 255, 0.1) 50px),
                linear-gradient(90deg, transparent 49px, rgba(0, 255, 255, 0.1) 50px);
            background-size: 100% 100%, 50px 50px, 50px 50px;
            animation: gridMove 20s linear infinite;
        }

        #pause-layer { background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); z-index: 30; }

        @keyframes gridMove { 0% { background-position: 0 0, 0 0, 0 0; } 100% { background-position: 0 0, 0 500px, 0 0; } }

        .game-title { font-size: 60px; font-weight: 900; margin-bottom: 20px; color: #fff; text-shadow: 0 0 10px var(--primary), 3px 3px 0px var(--secondary); transform: skewX(-10deg); }
        .section-title { font-size: 20px; color: #aaa; margin-bottom: 10px; letter-spacing: 4px; }
        .grid { display: flex; gap: 25px; margin-bottom: 20px; }
        
        .card { background: var(--dark-glass); backdrop-filter: blur(10px); border: 1px solid var(--border-glass); padding: 20px; border-radius: 12px; cursor: pointer; text-align: center; min-width: 160px; transition: 0.3s; position: relative; overflow: hidden; }
        .card:hover:not(.disabled) { transform: translateY(-10px); background: rgba(30, 30, 40, 0.85); }
        .card.selected { border-color: var(--primary); box-shadow: 0 10px 30px rgba(0, 255, 255, 0.2), inset 0 0 15px rgba(0, 255, 255, 0.1); transform: translateY(-5px) scale(1.05); }
        .card.disabled { opacity: 0.4; cursor: not-allowed; filter: grayscale(100%); }
        .locked-badge { display: inline-block; margin-top: 10px; background: #ff4757; color: white; font-family: 'Orbitron', sans-serif; font-size: 12px; padding: 4px 10px; border-radius: 4px; }

        .carousel-container { display: flex; align-items: center; justify-content: space-between; gap: 20px; background: var(--dark-glass); backdrop-filter: blur(10px); border: 1px solid var(--primary); border-radius: 12px; padding: 20px 40px; width: 450px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0, 255, 255, 0.1), inset 0 0 15px rgba(0, 255, 255, 0.05); }
        .carousel-content { display: flex; flex-direction: column; align-items: center; width: 100%; }
        #car-showcase { width: 280px; height: 160px; margin-bottom: 10px; cursor: grab; }

        .nav-btn { background: transparent; border: none; color: white; font-size: 40px; cursor: pointer; padding: 10px; transition: 0.2s; text-shadow: 0 0 10px var(--primary); }
        .nav-btn:hover { color: var(--primary); transform: scale(1.2); }

        #car-display-name { font-size: 26px; margin-bottom: 15px; letter-spacing: 2px; }
        .stats-container { width: 100%; padding: 0 20px; box-sizing: border-box; }
        .stat-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; font-size: 14px; font-weight: 600; color: #ccc;}
        .stat-bar { width: 150px; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; }
        .stat-fill { height: 100%; border-radius: 4px; box-shadow: 0 0 5px currentColor; transition: width 0.4s ease; }

        button.menu-button { font-family: 'Orbitron', sans-serif; padding: 18px 60px; font-size: 24px; font-weight: 900; background: transparent; color: var(--primary); border: 2px solid var(--primary); border-radius: 4px; cursor: pointer; transition: 0.3s; text-shadow: 0 0 5px var(--primary); box-shadow: 0 0 15px rgba(0, 255, 255, 0.2) inset; transform: skewX(-10deg); margin-top: 15px; width: 350px;}
        button.menu-button:hover { background: var(--primary); color: #000; box-shadow: 0 0 30px var(--primary); text-shadow: none; transform: skewX(-10deg) scale(1.05); }
        
        .controls { margin-top: 20px; color: #888; font-size: 16px; letter-spacing: 1px; }
        .controls span { color: var(--primary); font-weight: bold; }

        /* HUD */
        .hud { position: absolute; top: 30px; left: 30px; font-size: 28px; font-weight: 700; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); z-index: 5; background: rgba(0,0,0,0.4); padding: 15px 25px; border-radius: 8px; border-left: 4px solid var(--primary); backdrop-filter: blur(5px); }
        .hud-val { font-family: 'Orbitron', sans-serif; color: var(--accent); }
        
        #pause-toggle-btn { position: absolute; top: 30px; right: 30px; font-size: 30px; z-index: 5; background: rgba(0,0,0,0.5); border: 2px solid #aaa; color: #aaa; border-radius: 8px; padding: 10px 20px; cursor: pointer; transition: 0.2s; backdrop-filter: blur(5px); font-family: 'Orbitron', sans-serif;}
        #pause-toggle-btn:hover { border-color: var(--primary); color: var(--primary); box-shadow: 0 0 15px var(--primary); }

        .speedo-container { position: absolute; bottom: 40px; right: 40px; text-align: right; background: rgba(0,0,0,0.5); padding: 15px 30px; border-radius: 8px; border-right: 4px solid var(--primary); backdrop-filter: blur(5px); }
        .speedo-val { font-family: 'Orbitron', sans-serif; font-size: 50px; color: white; text-shadow: 0 0 15px var(--primary); line-height: 1;}
        #nos-container { position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); width: 400px; height: 12px; background: rgba(0,0,0,0.8); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; overflow: hidden; z-index: 5; }
        #nos-bar { height: 100%; transition: width 0.1s linear, background 0.3s; }
        #speed-lines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; box-shadow: inset 0 0 0px rgba(0, 255, 255, 0); transition: 0.3s; pointer-events: none; z-index: 2; }
        .boosting { box-shadow: inset 0 0 150px rgba(0, 255, 255, 0.4) !important; }
        #countdown-display, #finish-display { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 180px; font-weight: 900; font-family: 'Orbitron', sans-serif; color: var(--accent); text-shadow: 0 0 40px rgba(255, 235, 59, 0.5), 5px 5px 0 #000; z-index: 20; transition: 0.2s; }
        .pop { transform: translate(-50%, -50%) scale(1.3) !important; }
        .results-box { background: var(--dark-glass); backdrop-filter: blur(15px); padding: 40px 60px; border-radius: 16px; border: 1px solid var(--primary); text-align: center; z-index: 40;}
        
        .dev-credit { position: absolute; bottom: 15px; right: 20px; font-family: 'Orbitron', sans-serif; font-size: 12px; color: rgba(255, 255, 255, 0.3); letter-spacing: 2px; pointer-events: none; text-align: right; line-height: 1.6; }
        .dev-credit span { color: var(--primary); opacity: 0.6; }

        /* --- NEW: MOBILE BLOCKER OVERLAY --- */
        #mobile-blocker {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: #050505; z-index: 99999;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; padding: 30px; box-sizing: border-box;
            background: 
                linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.95)),
                linear-gradient(transparent 49px, rgba(255, 0, 85, 0.1) 50px),
                linear-gradient(90deg, transparent 49px, rgba(255, 0, 85, 0.1) 50px);
            background-size: 100% 100%, 50px 50px, 50px 50px;
        }

        #mobile-blocker h1 { font-size: 40px; color: var(--secondary); text-shadow: 0 0 20px rgba(255,0,85,0.6); margin-bottom: 20px; transform: skewX(-10deg); }
        #mobile-blocker p { font-size: 20px; color: #ccc; max-width: 500px; margin-bottom: 10px; font-family: 'Orbitron', sans-serif;}
        #mobile-blocker .keyboard-icon { font-size: 60px; margin-bottom: 20px; }

        /* Detect Mobile Devices & Small Screens */
        @media (max-width: 800px), (hover: none) and (pointer: coarse) {
            #mobile-blocker { display: flex; }
            #game-container, #ui-layer, #hud, #pause-layer, #results-layer, #speed-lines { display: none !important; }
        }
    </style>
</head>
<body>

<div id="mobile-blocker">
    <div class="keyboard-icon">⌨️</div>
    <h1>DESKTOP ONLY</h1>
    <p>Neon Racer requires a physical keyboard to play.</p>
    <p style="color: #666; font-size: 16px; margin-top: 20px;">Please open this game on a PC or Mac browser.</p>
</div>

<div id="game-container"></div>
<div id="speed-lines"></div>
<div id="countdown-display" class="hidden">3</div>
<div id="finish-display" class="hidden">FINISH!</div>

<div id="hud" class="hidden">
    <div class="hud">
        <div>TIME <span id="time-display" class="hud-val">0.00</span></div>
        <div>LAP <span id="lap-counter" class="hud-val">0</span><span style="color:#aaa; font-size: 20px;">/3</span></div>
        <div style="margin-top: 10px; font-size: 20px;">POS <span id="position-display" class="hud-val" style="font-size: 28px;">1st</span></div>
    </div>
    
    <button id="pause-toggle-btn">|| PAUSE</button>

    <div class="speedo-container"><div class="speedo-val" id="speed-display">0</div><div style="color: #aaa;">KM/H</div></div>
    <div id="nos-container"><div id="nos-bar" style="width: 100%; background: linear-gradient(90deg, #00ffff, #0055ff);"></div></div>
</div>

<div id="pause-layer" class="hidden">
    <h2 style="font-size: 60px; color: var(--accent); font-family: 'Orbitron', sans-serif; margin-bottom: 40px; text-shadow: 0 0 20px rgba(255,235,59,0.5);">GAME PAUSED</h2>
    <button id="resume-btn" class="menu-button">RESUME</button>
    <button id="restart-btn" class="menu-button" style="border-color: var(--accent); color: var(--accent);">RESTART MATCH</button>
    <button id="quit-btn" class="menu-button" style="border-color: var(--secondary); color: var(--secondary);">QUIT TO MENU</button>
</div>

<div id="ui-layer">
    <h1 class="game-title">NEON <span>RACER</span></h1>
    
    <div class="section-title">SELECT TRACK</div>
    <div class="grid" id="map-select">
        <div class="card selected" data-map="0"><h3 style="color:#00d2d3;">FOREST RING</h3></div>
        <div class="card disabled"><h3 style="color:#fff;">DESERT DUNE</h3><div class="locked-badge">LOCKED</div></div>
        <div class="card disabled"><h3 style="color:#fff;">NEON CITY</h3><div class="locked-badge">COMING SOON</div></div>
    </div>

    <div class="section-title">SELECT VEHICLE</div>
    <div class="carousel-container">
        <button id="prev-car" class="nav-btn">&#10094;</button>
        <div class="carousel-content">
            <div id="car-showcase"></div>
            <h3 id="car-display-name">STRIKER</h3>
            <div class="stats-container">
                <div class="stat-row"><span>SPD</span><div class="stat-bar"><div id="stat-spd" class="stat-fill"></div></div></div>
                <div class="stat-row"><span>ACC</span><div class="stat-bar"><div id="stat-acc" class="stat-fill"></div></div></div>
                <div class="stat-row"><span>HDL</span><div class="stat-bar"><div id="stat-hdl" class="stat-fill"></div></div></div>
            </div>
        </div>
        <button id="next-car" class="nav-btn">&#10095;</button>
    </div>

    <div class="section-title">AI DIFFICULTY</div>
    <div class="grid" id="diff-select">
        <div class="card" data-diff="0"><h3 style="color:#2ed573;">ROOKIE</h3></div>
        <div class="card selected" data-diff="1"><h3 style="color:#ffeb3b;">PRO</h3></div>
        <div class="card" data-diff="2"><h3 style="color:#ff4757;">VETERAN</h3></div>
    </div>

    <button id="start-btn" class="menu-button" style="width: auto;">START ENGINE</button>
    
    <div class="dev-credit">
        VERSION 1.0.0<br>
        DEVELOPED BY <span>HIRUNA</span>
    </div>
</div>

<div id="results-layer" class="hidden">
    <div class="results-box">
        <h2>FINAL STANDINGS</h2>
        <table id="results-table" style="width:100%; margin-bottom: 20px; font-size: 22px; color: white;">
            <tbody id="results-body"></tbody>
        </table>
        <button id="menu-btn" class="menu-button">MAIN MENU</button>
    </div>
</div>

<script type="module" src="/src/main.js"></script>
</body>
</html>